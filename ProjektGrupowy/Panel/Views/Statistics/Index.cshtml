@model Panel.Models.StatistiscViewModel
@{
    ViewBag.Title = "Statistics";
}

<body>
    <h2>Statistics</h2>

</body>

<p>Statistics of user @User.Identity.Name</p>

<div class="row">
    <div class="form-group">
        <label for="type-input">Chart type:</label>
        @Html.DropDownListFor(x => x.CurrentChartType.Id, new SelectList(Model.ChartTypes, "Id", "Name"), new { @id = "type-input", @class = "form-control" })
    </div>
    <div class="form-group">
        <label for="start-input">Start date:</label>
        @Html.EditorFor(model => model.StartDate, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="end-input">End date:</label>
        @Html.EditorFor(model => model.EndDate, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="attribute-input">Filter by attribute:</label>
        @Html.DropDownListFor(x => x.CurrentAttribute.Id, new SelectList(Model.Attributes, "Id", "Name"), new { @id = "operator-input", @class = "form-control" })
    </div>
    <button onclick="showStatistics()" type="submit" class="btn btn-default">Show Statistics</button>
</div>
<div class="row" style="width:500px; height:500px;">
    <canvas id="myChart"></canvas>
</div>
<div class="row">
    <table class="table">
        <thead class="thead-inverse">
            <tr>
                <th>Mac osx</th>
                <th>Linux</th>
                <th>Windows</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>12</td>
                <td>19</td>
                <td>13</td>
            </tr>
        </tbody>
    </table>
</div>

@section scripts{
    <script type="text/javascript" language="javascript">
        function showStatistics() {
            var chartType = '@Model.CurrentChartType.Name'
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: chartType,
                data: {
                    labels: ["linux", "mac osx", "windows"],
                    datasets: [{
                        backgroundColor: [
                          "#2ecc71",
                          "#3498db",
                          "#95a5a6"
                        ],
                        data: [12, 19, 3]
                    }]
                }
            });
        }
     </script>
}

